(function() {
    // Define the unique selector for the specific page
    const specificPageSelector = 'body.page-id-27'; // Replace with your actual page ID or unique class

    // Check if we're on the specific page
    if (!document.querySelector(specificPageSelector)) {
        return; // Exit if not on the specific page
    }

    // Force the page to start at the top on load
    window.onbeforeunload = function() {
        window.scrollTo(0, 0);
    };

    // Check if GSAP and ScrollTrigger are loaded
    let checkIfGsapLoaded = setInterval(function() {
        const isElementorEditorActive = document.querySelector('body').classList.contains("elementor-editor-active");
        if (window.gsap && window.ScrollTrigger && !isElementorEditorActive) {
            gsap.registerPlugin(ScrollTrigger);
            initializeGsapAnimations();
            clearInterval(checkIfGsapLoaded);
        }
    }, 500);

    function initializeGsapAnimations() {
			
        const images = document.querySelectorAll(".wp-section-center .img");
        const textElement = document.querySelector(".wp-gsap-text");
        const counterElement = document.querySelector(".wp-textcounter");
        const textUpdates = [
            "Your creativity knows no bounds.",
            "A place where you can be anyone or anything.",
            "Unleash Your Digital Persona and become your own brand.",
            "Craft Your Story, Your Way.",
            "Dive into content creation like never before.",
            "Forge Genuine Connections.",
            "Monetize Your Influence.",
            "A Marketplace Like No Other.",
            "Collaborate, celebrate and conquer the virtual influencer market with a presence thatâ€™s twice as powerful"
        ];

        let currentIndex = 0;

        gsap.timeline({
            scrollTrigger: {
                trigger: ".wp-section",
                start: "top top",
                end: "+=2500px bottom",
                scrub: 1,
                pin: true,
                onUpdate: self => {
                    let progress = self.progress;
                    let totalImages = images.length;
                    let newIndex = Math.round(progress * (totalImages - 1));

                    if (newIndex !== currentIndex) {
                        images.forEach((img, index) => {
                            if (index === newIndex) {
                                gsap.to(img, { left: "0", duration: 0.5 });
                            } else if (index < newIndex) {
                                gsap.to(img, { left: "-150%", duration: 0.5 });
                            } else {
                                gsap.to(img, { left: "150%", duration: 0.5 });
                            }
                        });
                        textElement.textContent = textUpdates[newIndex];
                        counterElement.textContent = newIndex + 1;
                        currentIndex = newIndex;
                    }
                }
            }
        });

        // GSAP animations with ScrollTrigger
        const scrollTriggers = [
            ".gsap-title",
            ".customizable",
            ".Digital",
            ".VirtuVibeZ",
            ".Authentic",
            ".feedback"
        ];

        scrollTriggers.forEach(selector => {
            gsap.to(selector, {
                scrollTrigger: {
                    trigger: selector,
                    start: "center center",
                    end: "+=2000px center",
                    scrub: true,
                    toggleClass: "gradient-text"
                },
                duration: 0.1
            });
        });
			

        // Feedback cards animation
//         const cards = document.querySelectorAll(".feedbackcards .card");
//         const cardWidth = cards[0].offsetWidth + parseInt(window.getComputedStyle(cards[0]).marginRight);

//         let tl1 = gsap.timeline({
//             scrollTrigger: {
//                 trigger: "#GsapTestimonialSection",
//                 start: "top top",
//                 end: "+=2500px bottom",
//                 scrub: 1,
//                 pin: true,
//             }
//         });

//         cards.forEach((card, i) => {
//             tl1.to(cards, {
//                 opacity: (index) => (index === i ? 1 : 0.5),
//                 scale: (index) => (index === i ? 1 : 0.9),
//                 duration: 0.5,
//                 onStart: () => setActiveCard(i)
//             }, i * 1);

//             tl1.to(".feedbackcards", {
//                 x: -cardWidth * (i + 1),
//                 duration: 0.5
//             }, i * 1 + 0.5);
//         });

//         function setActiveCard(index) {
//             cards.forEach((card, i) => {
//                 card.classList.toggle("card-active", i === index);
//             });
//         }

//         Feedback cards animation
                const cards = document.querySelectorAll(".wp-feedback-cards .wp-card");
                const cardWidth = cards[0].offsetWidth + parseInt(window.getComputedStyle(cards[0]).marginRight);
        
                let tl1 = gsap.timeline({
                    scrollTrigger: {
                        trigger: ".wp-section-feedback",
                        start: "top top",
                        end: "+=2500px bottom",
                        scrub: 1,
                        pin: true,
                    }
                });
        
                cards.forEach((card, i) => {
                    tl1.to(cards, {
                        opacity: (index) => (index === i ? 1 : 0.5),
                        scale: (index) => (index === i ? 1 : 0.9),
                        duration: 0.5,
                        onStart: () => setActiveCard(i)
                    }, i * 1);
        
                    tl1.to(".wp-feedback-cards", {
                        x: -cardWidth * (i + 1),
                        duration: 0.5
                    }, i * 1 + 0.5);
                });
        
                function setActiveCard(index) {
                    cards.forEach((card, i) => {
                        card.classList.toggle("card-active", i === index);
                    });
                }

    }
})();
